<script setup lang="ts">
import { ref, onMounted } from "vue";

const startDate = new Date("2025-09-18 18:00");
const diff = ref(0);

const days = ref(0);
const hours = ref(0);
const minutes = ref(0);
const seconds = ref(0);

function updateCounter() {
  const now = new Date();
  diff.value = Math.max(0, now.getTime() - startDate.getTime());
  let _diff = Number(`${diff.value || 0}`);

  const d = Math.floor(_diff / (1000 * 60 * 60 * 24));
  _diff -= d * (1000 * 60 * 60 * 24);
  const h = Math.floor(_diff / (1000 * 60 * 60));
  _diff -= h * (1000 * 60 * 60);
  const m = Math.floor(_diff / (1000 * 60));
  _diff -= m * (1000 * 60);
  const s = Math.floor(_diff / 1000);
  days.value = d;
  hours.value = h;
  minutes.value = m;
  seconds.value = s;
}

const farewellPhrasesList = [
  "–ú—ã –±—É–¥–µ–º —Å–∫—É—á–∞—Ç—å ‚Äî —Ç—ã –æ—Å—Ç–∞–≤–∏–ª —Å–ª–µ–¥ –≤ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ!",
  "–ë–µ—Ä–µ–≥–∏ —Å–µ–±—è ‚Äî —Ç–≤–æ—ë –∑–¥–æ—Ä–æ–≤—å–µ –∏ —Å—á–∞—Å—Ç—å–µ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ!",
  "–£–¥–∞—á–∏ –≤–æ –≤—Å—ë–º ‚Äî –ø—É—Å—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥ –≤–µ–¥—ë—Ç –∫ —É—Å–ø–µ—Ö—É!",
  "–ü—É—Å—Ç—å –≤—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ ‚Äî —Ç—ã —ç—Ç–æ–≥–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å!",
  "–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á ‚Äî –Ω–∞–¥–µ–µ–º—Å—è, –ø—É—Ç–∏ –µ—â—ë –ø–µ—Ä–µ—Å–µ–∫—É—Ç—Å—è!",
  "–í—Å–µ–≥–æ –Ω–∞–∏–ª—É—á—à–µ–≥–æ ‚Äî –æ—Ç –¥—É—à–∏ –∂–µ–ª–∞–µ–º —Å—á–∞—Å—Ç—å—è –∏ –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è!",
  "–ü—É—Å—Ç—å —É–¥–∞—á–∞ –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π!",
  "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ!",
  "–ü—É—Å—Ç—å —Å–±—É–¥—É—Ç—Å—è –¥–∞–∂–µ —Å–∞–º—ã–µ —Å–º–µ–ª—ã–µ –º–µ—á—Ç—ã!",
  "–ü—É—Å—Ç—å —Å—á–∞—Å—Ç—å–µ —Å—Ç—É—á–∏—Ç—Å—è –≤ —Ç–≤–æ—é –¥–≤–µ—Ä—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!",
  "–ü—É—Å—Ç—å –≤–µ—Ç–µ—Ä –ø–µ—Ä–µ–º–µ–Ω –¥—É–µ—Ç –≤ —Ç–≤–æ—é –ø–æ–ª—å–∑—É!",
  "–ü—É—Å—Ç—å –ª—é–±–æ–≤—å, —Ä–∞–¥–æ—Å—Ç—å –∏ —Ç–µ–ø–ª–æ –æ–∫—Ä—É–∂–∞—é—Ç —Ç–µ–±—è –≤—Å–µ–≥–¥–∞!",
  "–ü—É—Å—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –Ω–µ –ø–æ–∫–∏–¥–∞–µ—Ç, –∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ!",
  "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–∞—Ä–∏—Ç –Ω–æ–≤—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –ø—Ä–∏—è—Ç–Ω—ã–µ —Å—é—Ä–ø—Ä–∏–∑—ã!",
  "–ü—É—Å—Ç—å –∑–∞ –∫–∞–∂–¥—ã–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º –∂–¥—ë—Ç —É—Å–ø–µ—Ö –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ!",
  "–ú—ã –ø–æ–º–Ω–∏–º —Ç–µ–±—è ‚Äî –∏ –±—É–¥–µ–º –≤—Å–ø–æ–º–∏–Ω–∞—Ç—å —Å —Ç–µ–ø–ª–æ–º –∏ —É–ª—ã–±–∫–æ–π!",
  "–¢—ã ‚Äî —á–∞—Å—Ç—å –Ω–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏. –°–ø–∞—Å–∏–±–æ –∑–∞ –≤—Å—ë, —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª!",
  "–ö–æ–º–∞–Ω–¥–∞ —É–∂–µ –Ω–µ —Ç–∞–∫–∞—è –±–µ–∑ —Ç–µ–±—è ‚Äî –Ω–æ –º—ã —Ä–∞–¥—ã –∑–∞ —Ç–≤–æ–π –Ω–æ–≤—ã–π –ø—É—Ç—å!",
  "–¢—ã —É—Ö–æ–¥–∏—à—å, –Ω–æ –æ—Å—Ç–∞—ë—à—å—Å—è –≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö üíô",
  "–ù–µ –ø—Ä–æ–ø–∞–¥–∞–π! –ò–Ω–æ–≥–¥–∞ –∑–∞–≥–ª—è–¥—ã–≤–∞–π ‚Äî –∫–æ—Ñ–µ –∑–∞ –Ω–∞—à —Å—á—ë—Ç üòâ",
  "–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é ‚Äî —Ç—ã –∑–∞—Ä—è–∂–∞–ª –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥!",
  "–ñ–¥—ë–º —Ñ–æ—Ç–æ —Å –Ω–æ–≤–æ–≥–æ –º–µ—Å—Ç–∞ ‚Äî –ø–æ–∫–∞–∂–∏, –∫–∞–∫ —Ç—ã —Ç–∞–º –∑–∞–∂–∏–≥–∞–µ—à—å!",
  "–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî –º—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏!",
  "–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ ‚Äî —Ç—ã –¥—Ä—É–≥, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç–µ–ª—å!",
  "–ü—É—Å—Ç—å –Ω–æ–≤—ã–π —ç—Ç–∞–ø –±—É–¥–µ—Ç –µ—â—ë –∫—Ä—É—á–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ!",
  "–¢—ã —Å–¥–µ–ª–∞–ª –Ω–∞—Å –ª—É—á—à–µ ‚Äî —Å–ø–∞—Å–∏–±–æ –∑–∞ —ç—Ç–æ!",
  "–ü—É—Å—Ç—å –Ω–æ–≤—ã–π –æ—Ñ–∏—Å —Å–∫–∞–∂–µ—Ç: ‚Äú–û–≥–æ, –≤–æ—Ç —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª!‚Äù",
  "–ù–µ –∑–∞–±—ã–≤–∞–π ‚Äî —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –≤–µ—Ä–Ω—É—Ç—å—Å—è (–¥–≤–µ—Ä–∏ –æ—Ç–∫—Ä—ã—Ç—ã!) ‚ù§Ô∏è",
  "–•–∞–ø–Ω–∏ –≤—è–ª–æ–≥–æ –¥–∂—É–Ω–¥–∂—É—Ä–∏–∫–∞",
  "–≠! –ß–æ —Ç—ã?!",
];

const farewellPhrase = ref("");
const showTimer = ref(false);
const pickRandomPhrase = () => {
  farewellPhrase.value =
    farewellPhrasesList[
      Math.floor(Math.random() * farewellPhrasesList.length)
    ] ?? "";
};

updateCounter();

onMounted(() => {
  pickRandomPhrase();
  setInterval(pickRandomPhrase, 10000);
  updateCounter();
  setInterval(updateCounter, 1000);
  showTimer.value = true;
});
</script>

<template>
  <UApp>
    <div
      class="fixed inset-0 flex flex-col items-center justify-center gap-6 bg-black text-white select-none p-12 text-shadow-sm text-center"
    >
      <NuxtImg
        src="bg.jpeg"
        height="2000"
        width="3000"
        loading="lazy"
        class="absolute inset-0 object-cover w-full h-full -z-10 blur-sm brightness-50"
      />
      <Transition mode="out-in" appear>
        <div class="text-2xl" v-if="showTimer">
          <span v-if="diff === 0">–í—Ä–µ–º—è –µ—â—ë –Ω–µ –ø—Ä–∏—à–ª–æ</span>
          <span v-else>–ü—Ä–æ—à–ª–æ –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –î–µ–Ω–∏—Å–∞</span>
        </div>
      </Transition>
      <Transition mode="out-in">
        <div v-if="showTimer">
          <div v-if="diff === 0">...</div>
          <div v-else class="flex flex-col items-center gap-4">
            <div class="text-5xl">
              <span v-if="days">{{ days }} –¥–Ω</span>
              {{ hours.toString().padStart(2, "0") }} —á
              {{ minutes.toString().padStart(2, "0") }} –º–∏–Ω
              {{ seconds.toString().padStart(2, "0") }} —Å–µ–∫
            </div>
            <div
              class="flex flex-col items-center gap-2 italic text-gray-400 cursor-pointer"
              @click="pickRandomPhrase"
            >
              <Transition mode="out-in">
                <div class="text-xl hover:text-white" :key="farewellPhrase">
                  ¬´{{ farewellPhrase }}¬ª
                </div>
              </Transition>
              <div class="text-sm self-end">–õ—é–±—è—â–∞—è –∫–æ–º–∞–Ω–¥–∞</div>
            </div>
          </div>
        </div>
        <div v-else>
          <UButton loading variant="ghost" color="neutral"></UButton>
        </div>
      </Transition>
    </div>
  </UApp>
</template>
